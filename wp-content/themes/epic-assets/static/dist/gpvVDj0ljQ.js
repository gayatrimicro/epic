!function(){var t="function"==typeof window.Promise?window.Promise:function(){function t(){for(var t=0;t<_.length;t++)_[t][0](_[t][1]);_=[],p=!1}function e(e,r){_.push([e,r]),p||(p=!0,w(t,0))}function r(t,e){function r(t){i(e,t)}function n(t){s(e,t)}try{t(r,n)}catch(t){n(t)}}function n(t){var e=t.owner,r=e._state,n=e._data,a=t[r],u=t.then;if("function"==typeof a){r=g;try{n=a(n)}catch(t){s(u,t)}}o(u,n)||(r===g&&i(u,n),r===v&&s(u,n))}function o(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,function(n){r||(r=!0,e===n?a(t,n):i(t,n))},function(e){r||(r=!0,s(t,e))}),!0}}catch(e){return r||s(t,e),!0}return!1}function i(t,e){t!==e&&o(t,e)||a(t,e)}function a(t,r){t._state===h&&(t._state=y,t._data=r,e(c,t))}function s(t,r){t._state===h&&(t._state=y,t._data=r,e(l,t))}function u(t){t._then=t._then.forEach(n)}function c(t){t._state=g,u(t)}function l(t){t._state=v,u(t),!t._handled&&b&&global.process.emit("unhandledRejection",t._data,t)}function f(t){global.process.emit("rejectionHandled",t)}function d(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof d==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],r(t,this)}var p,h="pending",y="settled",g="fulfilled",v="rejected",m=function(){},b="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,w="undefined"==typeof setImmediate?setTimeout:setImmediate,_=[];return d.prototype={constructor:d,_state:h,_then:null,_data:void 0,_handled:!1,then:function(t,r){var o={owner:this,then:new this.constructor(m),fulfilled:t,rejected:r};return!r&&!t||this._handled||(this._handled=!0,this._state===v&&b&&e(f,this)),this._state===g||this._state===v?e(n,o):this._then.push(o),o.then},catch:function(t){return this.then(null,t)}},d.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new d(function(e,r){for(var n,o=[],i=0,a=0;a<t.length;a++)n=t[a],n&&"function"==typeof n.then?n.then(function(t){return i++,function(r){o[t]=r,--i||e(o)}}(a),r):o[a]=n;i||e(o)})},d.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new d(function(e,r){for(var n,o=0;o<t.length;o++)n=t[o],n&&"function"==typeof n.then?n.then(e,r):e(n)})},d.resolve=function(t){return t&&"object"==typeof t&&t.constructor===d?t:new d(function(e){e(t)})},d.reject=function(t){return new d(function(e,r){r(t)})},d}();!function(){var e={};e.f={},e.m={},e.r=function(t){var r=e.m[t];if(r)return r.m.exports;var n=e.f[t];if(n)return r=e.m[t]={},r.exports={},r.m={exports:r.exports},n.call(r.exports,r.m,r.exports),r.m.exports},e.f[0]=function(r,n){var o=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},i=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(n,"__esModule",{value:!0});var a=e.r(1),s=e.r(2),u=e.r(11);if(e.r(6),e.r(8).get(function(){return void 0===window.triptease.onboard.bootstrap},!0))!function(){o(void 0,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,new a.Bootstrap(window).start()];case 1:return[2,t.sent()]}})})}();else{var c=s.scriptSrc(),l=window.triptease.onboard.bootstrap;l.contextExtractor.addScript(c),u.defaultLogger.log("Bootstrap already loaded - adding script src "+c),l.integrate()}},e.f[1]=function(r,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o.apply(this,arguments)},i=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},a=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(n,"__esModule",{value:!0});var u=e.r(6),c=e.r(7),l=e.r(11),f=e.r(8),d=e.r(15),p=e.r(16),h=e.r(2),y=e.r(18),g=e.r(21),v=e.r(22),m=e.r(24),b=e.r(25),w=e.r(3),_=e.r(26),S=e.r(20),O=e.r(4),k=e.r(5),x={accessToken:"9f372891a9474079a5fd5954b2bf7f56",payload:{environment:"production",client:{javascript:{source_map_enabled:!0,guess_uncaught_frames:!0}}}},j=function(){function e(t,e,r,n,o,i,a,s,u,c,f,d){void 0===e&&(e=new p.WindowEvents(t)),void 0===r&&(r=l.defaultLogger),void 0===n&&(n=new h.ContextExtractor(t.document)),void 0===o&&(o=new g.ErrorListener(t)),void 0===i&&(i=S.uuid()),void 0===a&&(a=new v.default(x,t)),void 0===s&&(s=new m.MessageBuilder(t,b.BootstrapAppDefinition,i)),void 0===u&&(u=new b.RealMessageBatcher(t,i)),void 0===c&&(c=new _.ApplicationStarter(t,r)),void 0===f&&(f=new _.ApplicationWaiter(t,r)),void 0===d&&(d=new k.Identity(t)),this.window=t,this.events=e,this.logger=r,this.contextExtractor=n,this.errorListener=o,this.pageVisitId=i,this.rollbar=a,this.messageBuilder=s,this.messageBatcher=u,this.starter=c,this.waiter=f,this.identityHelper=d,this.serialised={probe:"",config:"",bootstrap:""}}return Object.defineProperty(e.prototype,"triptease",{get:function(){var t=this.window.triptease=this.window.triptease||{};return t.onboard={bootstrap:this,workers:{}},d.lazy(this,"triptease",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.contextExtractor.get()},enumerable:!0,configurable:!0}),e.prototype.start=function(){return i(this,void 0,void 0,function(){var e=this;return a(this,function(r){switch(r.label){case 0:return this.errorListener.listen(this.handleGlobalError.bind(this)),[4,t.all([this.identityHelper.getIdentity(),this.kernelFrame()]).then(function(t){var r=s(t,2),n=r[0],o=r[1];e.identity=n;var i=o.contentWindow;e.messaging=new y.Messaging(e.window,new y.WindowHandler(e.window,i,y.DEFAULT_HOSTS,e.logger),e.logger),e.messaging.start(void 0),e.events.listen(e.integrate.bind(e)),e.events.start()}).catch(function(t){e.rollbar.warn(t)})];case 1:return r.sent(),[2]}})})},e.prototype.kernelFrame=function(){return i(this,void 0,t,function(){var t,e;return a(this,function(r){switch(r.label){case 0:return t=w.KernelFrame.application(this.window.location.hostname),[4,this.starter.start(t)];case 1:return e=r.sent(),[2,e]}})})},e.prototype.integrate=function(){return i(this,void 0,void 0,function(){var t,e,r,n,i,s,u;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),this.triptease.onboard.probe=this.runProbe(),[4,this.determineBookingEngine(this.triptease.onboard.probe)];case 1:return t=a.sent(),[4,this.getOnboardConfig(t)];case 2:return(e=a.sent())?(this.triptease.onboard.config=e,r=this.triptease,n=[o({},this.triptease.config)],[4,this.getTripteaseConfig()]):[2];case 3:return r.config=o.apply(void 0,n.concat([a.sent()])),this.hasNotChanged("config",this.getConfigToWatch())?[2]:(this.window.postMessage({type:"triptease.config.changed",config:this.triptease.config},"*"),[4,this.loadApplicationsInOrder()]);case 4:return a.sent(),s=(i=this.window).postMessage,[4,this.messageBuilder.buildMessage({type:"triptease.config",payload:this.generatePublicConfig()},this.identity)];case 5:return s.apply(i,[a.sent(),"*"]),[3,7];case 6:return u=a.sent(),this.rollbar.warn(u),this.logger.log(u),[3,7];case 7:return[2]}})})},e.prototype.determineBookingEngine=function(e){return i(this,void 0,t,function(){return a(this,function(t){switch(t.label){case 0:return e.context.selfLoadedScriptName?[2,{name:"SelfLoaded:"+e.context.selfLoadedScriptName,version:-1}]:[3,1];case 1:return[4,this.getBookingEngine()];case 2:return[2,t.sent()]}})})},e.prototype.hasNotChanged=function(t,e){var r=this.serialised[t];this.serialised[t]=f.stableJson(e);var n=r===this.serialised[t];return n&&this.logger.debug("No change in "+t+" data - ignoring"),n},e.prototype.runProbe=function(){return new c.DataExtractor(this.window,this.context).probe()},e.prototype.getOnboardConfig=function(e){return i(this,void 0,t,function(){var t;return a(this,function(r){switch(r.label){case 0:return t=o(o({},this.triptease.onboard.probe),{bookingEngine:e}),[4,this.messaging.request({type:"kernel.getOnboardConfig",value:t})];case 1:return[2,r.sent()]}})})},e.prototype.getBookingEngine=function(){return i(this,void 0,t,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.messaging.request({type:"kernel.getBookingEngine"})];case 1:return[2,t.sent()]}})})},e.prototype.getTripteaseConfig=function(){return f.Objects.removeEmpty({apiKey:this.triptease.onboard.config.apiKey,clientKey:this.triptease.onboard.config.clientKey,clientName:this.triptease.onboard.config.clientName,reservation:this.triptease.onboard.probe.context.reservation})},e.prototype.getConfigToWatch=function(){return f.Objects.removeEmpty(o(o({},this.generatePublicConfig()),{identityData:this.identity,applications:this.triptease.onboard.config.applications}))},e.prototype.generatePublicConfig=function(){return o(o({},this.triptease.config),{pageData:this.getPageData()})},e.prototype.getPageData=function(){var t=this.triptease.integration;return t?t.data&&t.data.pageData?t.data.pageData:t.config?O.default(t.config):{type:u.PageType.Unknown}:{type:u.PageType.Unknown}},e.prototype.loadApplicationsInOrder=function(){return i(this,void 0,void 0,function(){var t,e,r;return a(this,function(n){switch(n.label){case 0:if(t=this.triptease.onboard.config,!t.applications)return[2];e=0,n.label=1;case 1:return e<t.applications.length?(r=t.applications[e],[4,this.starter.start(r)]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},e.prototype.handleGlobalError=function(t){t&&this.rollbar.error(t)},e}();n.Bootstrap=j},e.f[2]=function(t,r){function n(){try{throw new Error}catch(n){if(!n.stack)return;var t=n.stack.match(/(https?.*):\d+:\d+/);if(!t)return;var e=a(t,2),r=e[1];return new c.Uri(r)}}function o(t){if("paperboy"!=t&&"confirm"!=t)return t}var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},i.apply(this,arguments)},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(r,"__esModule",{value:!0});var s=e.r(8),u=e.r(12),c=e.r(17),l=function(){function t(t,e){void 0===e&&(e=s.Arrays.clean([n()])),this.document=t,this.scripts=e}return t.prototype.get=function(){var t=this.findScripts(),e=this.document.querySelector('script[src*="triptease.io/client-integrations"]'),r=!(!e||null!==e.getAttribute("name")&&-1!==e.getAttribute("name").indexOf("triptease.onboard"));return t.reduce(function(t,e){var r=e.path.match(/\/paperboy\/+([^\/.]+)(?:\.js)?$/),n=r&&r[1],a=u.queryObject(e.query,!1),c=s.Objects.removeEmpty({apiKey:a.apiKey||a.hotelkey||a.hotelKey||a["api-key"]||a.token,clientKey:a.clientKey||o(n),reservation:s.Objects.removeEmpty({currency:a.bookingCurrency,reservationId:a.bookingReference,totalPrice:a.bookingValue,checkin:a.checkin,checkout:a.checkout,basePrice:a.basePrice}),paperboyHost:-1!=e.host.indexOf("static.triptease.io")?e.host:a.paperboyHost?a.paperboyHost:void 0,integrationId:a.integrationId||t.integrationId});return i(i({},t),c)},{selfLoadedScriptName:r?this.scriptNameFromUrl(e.src):""})},t.prototype.scriptNameFromUrl=function(t){return t.match(/client-integrations\/(platform|confirmation)\/(.*)\.js/)[2].toLowerCase()},t.prototype.findScripts=function(){return s.Arrays.flatten([this.findScriptsFromDocument("bootstrap.js","/paperboy/","/identity-service/confirm"),this.scripts])},t.prototype.addScript=function(t){t&&this.scripts.push(t)},t.prototype.findScriptsFromDocument=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.map(function(t){return'script[src*="'+t+'"][src*="triptease.io"]'}).join(", ");return s.Arrays.from(this.document.querySelectorAll(r)).map(function(t){return new c.Uri(t.src)})},t}();r.ContextExtractor=l,r.scriptSrc=n},e.f[3]=function(t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e.r(6),o=function(){function t(){}return t.application=function(t){return new n.Application("kernel","https://onboard.triptease.io/kernel/latest/kernel-host.html?originHost="+t,"iframe","triptease.onboard.kernel-started")},t}();r.KernelFrame=o},e.f[4]=function(t,r){function n(t){return t.type===a.PageType.RoomsAndRates?o(t):i(t)}function o(t){return s.Objects.removeEmpty({rateDetails:t.rateDetails?t.rateDetails:[{price:Number(t.directPrice),currency:t.currency,rateName:t.roomRate,roomName:t.roomName}],adults:t.adults,children:t.children,language:t.language,layout:t.layout,rooms:t.rooms,total:t.total,type:t.type,checkin:t.checkin&&new Date(t.checkin),checkout:t.checkout&&new Date(t.checkout)})}function i(t){return{currency:t.currency,price:t.price,reference:t.reference,type:t.type,basePrice:t.basePrice&&Number(t.basePrice),checkin:t.checkin&&new Date(t.checkin),checkout:t.checkout&&new Date(t.checkout)}}Object.defineProperty(r,"__esModule",{value:!0});var a=e.r(6),s=e.r(8);r.default=n},e.f[5]=function(r,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o.apply(this,arguments)},i=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},a=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e.r(27),u=e.r(28),c=e.r(20),l=function(){function e(t,e,r){void 0===e&&(e=s.http),void 0===r&&(r=new u.Cookie(t)),this.browserWindow=t,this.httpClient=e,this.cookie=r,this.identityDataCookieName="triptease-identity-data",this.identityDataCookieAge=25200,this.domainUserIdName="tt-domain-user-id",this.domainUserIdAge=15768e4}return e.prototype.getIdentity=function(){return i(this,void 0,t,function(){var t,e,r;return a(this,function(n){switch(n.label){case 0:return[4,this.httpClient({url:"https://api.triptease.io/identity-service/identity",method:"GET",options:{credentials:!0}})];case 1:return t=n.sent(),(e=JSON.parse(t.body),(r=this.getLocalIdentity())&&!0===e.isFreshSession)?[2,o(o({},r),{domainUserId:this.getOrCreateDomainId()})]:(this.storeLocalIdentity(e),[2,o(o({},e),{domainUserId:this.getOrCreateDomainId()})])}})})},e.prototype.storeLocalIdentity=function(t){this.cookie.set(this.identityDataCookieName,this.browserWindow.btoa(JSON.stringify(t)),this.identityDataCookieAge,"/")},e.prototype.getLocalIdentity=function(){var t=this.cookie.get(this.identityDataCookieName);if(t)return JSON.parse(this.browserWindow.atob(t))},e.prototype.getOrCreateDomainId=function(){try{var t=this.browserWindow.localStorage.getItem(this.domainUserIdName)||this.cookie.get(this.domainUserIdName);if(t)return t}catch(t){}var e=c.uuid();try{this.browserWindow.localStorage.setItem(this.domainUserIdName,e)}catch(t){}return this.cookie.set(this.domainUserIdName,e,this.domainUserIdAge),e},e}();n.Identity=l},e.f[6]=function(t,e){function r(t){return"object"==typeof t&&"x"in t&&"y"in t&&"width"in t&&"height"in t}function n(t){return"object"==typeof t&&"source"in t&&"identifier"in t&&"type"in t}function o(t){return"object"==typeof t&&"identifier"in t&&"Other"==t.identifier}Object.defineProperty(e,"__esModule",{value:!0}),e.isPercentagePosition=r,e.isIdentifierSource=n,e.isOtherSource=o;var i=function(){function t(t,e,r,n){void 0===r&&(r="script"),this.name=t,this.url=e,this.type=r,this.startMessage=n}return t}();e.Application=i;!function(t){t.RoomsAndRates="RoomsAndRates",t.Confirmation="Confirmation",t.Payment="Payment",t.Unknown="Unknown"}(e.PageType||(e.PageType={}))},e.f[7]=function(t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},n.apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(r,"__esModule",{value:!0});var a=e.r(8),s=e.r(9),u=e.r(10),c=e.r(13),l=e.r(12),f=function(){function t(t,e,r,n,o){void 0===e&&(e={}),void 0===r&&(r=t.document),void 0===n&&(n=new c.SystemTimers),void 0===o&&(o=50),this.window=t,this.context=e,this.document=r,this.timers=n,this.maxIdentifiers=o}return t.prototype.probe=function(){var t=this.identifierSources();return n(n({},this.baseData()),{identifierSources:t})},t.prototype.baseData=function(){return{context:this.context,language:this.language,location:this.location,referrer:this.document.referrer,structuredData:this.structuredData}},t.prototype.windowData=function(){var t=this,e=this.baseData(),r=a.get(function(){return t.window.document.querySelector("#clienId").value},void 0);return a.Objects.removeEmpty(n(n({},e),{dataLayer:this.dataLayer,globalTokens:this.window._GlobalTokens||{},wsVars:this.window.WsVars||{},wlp:this.window.wlp||{},imperatore:this.window.Imperatore,busyRooms:this.window.$IBE_hotelName,rmsClientId:r,hotelCodeFromCookie:this.cookie.HotelCode,loews:this.window._reztrack&&this.window._reztrack.send&&this.window._reztrack.send.name,explicitHotelIdentifier:this.window.explicitHotelIdentifier}))},t.prototype.identifierSources=function(){var t=this.windowData(),e=(new u.TrustedIdentifierSources).fromProbe(t);return e.length>0?e.slice(0,this.maxIdentifiers):new u.UntrustedIdentifierSources(this.labels).fromProbe(t).slice(0,this.maxIdentifiers)},Object.defineProperty(t.prototype,"dataLayer",{get:function(){var t=this;return a.get(function(){return t.window.dataLayer.filter(function(t){return a.get(function(){return 0!==t.event.indexOf("gtm.")},!0)}).reverse()},[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cookie",{get:function(){return this.document.cookie.split(";").reduce(function(t,e){var r=o(e.trim().split("=").map(decodeURIComponent),2),n=r[0],i=r[1];return t[n]=i,t},{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return{browser:this.window.navigator.language,html:this.document.documentElement.getAttribute("lang")||this.document.documentElement.getAttribute("xml:lang")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){var t={href:this.window.location.href,host:this.window.location.host},e=l.queryObject(this.window.location.search,!1);return n(n({},t),{context:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return i(this.titles,this.metaLabels).filter(function(t){return t.identifier&&t.identifier.length>2&&t.identifier.length<93})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titles",{get:function(){return this.document.title.split(/[|\-:]/).reverse().map(function(t,e){return u.identifierSource("title",e,t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meta",{get:function(){return a.Arrays.from(this.document.getElementsByTagName("meta")).reduce(function(t,e){var r=e.getAttribute("name")||e.getAttribute("property")||e.getAttribute("http-equiv"),n=e.getAttribute("content");return r?t[r]=n:(t.unknown=t.unknown||[],t.unknown.push(a.Arrays.from(e.attributes).map(function(t){return[t.name,t.value]}))),t},{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metaLabels",{get:function(){var t=["site-id","og:title","og:site_name","twitter:title"],e=this.meta;return Object.keys(e).filter(function(e){return-1!=t.indexOf(e)}).map(function(t,r){return u.identifierSource("meta."+t,r,e[t])})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"structuredData",{get:function(){return s.AllStructuredDataProcessor.processDocument(this.document).filter(function(t){return-1!==u.supportedStructuredDataTypes.indexOf(t["@type"])})},enumerable:!0,configurable:!0}),t}();r.DataExtractor=f},e.f[8]=function(t,e){function r(t){switch(typeof t){case"undefined":return!0;case"string":return""===t;case"number":return isNaN(t);case"object":return null==t||t.constructor!==Date&&(Array.isArray(t)?0===t.length:0===Object.keys(t).length);default:return!1}}function n(t,e){void 0===e&&(e=void 0);try{var r=t();return void 0===r?e:r}catch(t){return e}}function o(t,e,r){var n=t[e];return void 0===n?t[e]=r:Array.isArray(n)?-1==n.indexOf(r)&&n.push(r):t[e]=[n,r],t}function i(t,e,r,n){void 0===n&&(n=function(t){return t});for(var o,i=[],a=0;null!=(o=t.exec(e));)i.push(n(e.substring(a,o.index))),i.push(r(o)),a=t.lastIndex;return i.push(n(e.substring(a))),i.join("")}function a(t){return i(/\w+/g,t,function(t){return s(t[0])})}function s(t){return t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()}function u(t){return JSON.stringify(p.sort(t))}function c(t,e){return u(t)===u(e)}var l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=r;var d=function(){function t(){}return t.endsWith=function(t,e){return t.substring(t.length-e.length,t.length)===e},t}();e.Strings=d;var p=function(){function t(){}return t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t.removeEmpty=function(e){return Array.isArray(e)?e.map(t.removeEmpty):Object.keys(e).reduce(function(t,n){var o=e[n];return r(o)||(t[n]=o),t},{})},t.sort=function(e){return"object"==typeof e&&null!==e?Array.isArray(e)?e.map(t.sort):Object.keys(e).sort().reduce(function(r,n){var o=e[n];return r[n]=t.sort(o),r},{}):e},t}();e.Objects=p;var h=function(){function t(){}return t.from=function(t){var e,r;if("function"==typeof Array.from)return Array.from(t);var n=[];try{for(var o=l(t),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.find=function(t,e){return t.find?t.find(e):f(t.filter(e),1)[0]},t.toObject=function(t){return t.reduce(function(t,e){return Object.keys(e).forEach(function(r){r in t||(t[r]=e[r])}),t},{})},t.flatten=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},t.unique=function(e){var r,n;if("function"==typeof Set&&1===new Set([1]).size)return t.from(new Set(e));var o=[];try{for(var i=l(e),a=i.next();!a.done;a=i.next()){var s=a.value;o.indexOf(s)<0&&o.push(s)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},t.clean=function(t){return t.filter(Boolean)},t.trim=function(t){return t.map(function(t){return t.trim()})},t}();e.Arrays=h;var y=function(){function t(){}return t.path=function(t){for(var e=[t];t.parentElement;)t=t.parentElement,e.push(t);return e},t}();e.Elements=y,e.get=n,e.globalThis=function(){return"undefined"!=typeof self?self:window}(),e.accumulateMultipleValues=o,e.regexReplace=i,e.titleCase=a,e.caseWord=s,e.stableJson=u,e.same=c},e.f[9]=function(t,r){function n(t,e){return o(o({},e),{"@format":t})}var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o.apply(this,arguments)},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(r,"__esModule",{value:!0});var s=e.r(8),u=e.r(10),c=function(){function t(t,e,r){this.scope=t,this.property=e,this.seed=r}return t.prototype.parentScope=function(t){var e=this,r=i(s.Elements.path(t)),n=r.slice(1);return s.Arrays.find(n,function(t){return t.hasAttribute(e.scope)})},t.prototype.getValue=function(t){return t.hasAttribute(this.scope)?this.processScope(t):t.getAttribute("content")||t.getAttribute("src")||t.getAttribute("href")||t.getAttribute("data")||t.getAttribute("value")||t.getAttribute("datetime")||t.textContent},t.prototype.processScope=function(t){var e=this;return s.Arrays.from(t.querySelectorAll("*["+this.property+"]")).filter(function(r){return e.parentScope(r)===t}).reduce(function(t,r){return s.accumulateMultipleValues(t,r.getAttribute(e.property),u.spaceCleaner.clean(e.getValue(r)))},this.seed(t))},t.prototype.processDocument=function(t){return s.Arrays.from(t.querySelectorAll("*["+this.scope+"]")).map(this.processScope.bind(this))},t}();r.StructuredDataExtractor=c,r.microdata=new c("itemscope","itemprop",function(t){var e=t.getAttribute("itemtype")||"Unknown",r=e.split("/");return n("microdata",{"@type":r.pop(),"@context":r.join("/")})}),r.rdfa=new c("typeof","property",function(t){return n("rdfa",{"@type":t.getAttribute("typeof"),"@context":t.getAttribute("vocab")})}),r.jsonLd={processDocument:function(t){return s.Arrays.flatten(s.Arrays.from(t.querySelectorAll('script[type="application/ld+json"]')).map(function(t){var e=t.textContent.replace(/[\r\n]/g," ");try{var r=JSON.parse(e);return Array.isArray(r["@graph"])?r["@graph"].map(function(t){return n("json-ld",t)}):n("json-ld",r)}catch(t){return{"@type":"Error",error:t.toString(),json:e}}}))}},r.AllStructuredDataProcessor={processDocument:function(t){return a(r.jsonLd.processDocument(t),r.microdata.processDocument(t),r.rdfa.processDocument(t))}}},e.f[10]=function(t,r){function n(t,e){var r=l.Arrays.find(Object.keys(t),function(t){return t.toLowerCase()===e.toLowerCase()}),n=r&&t[r];return"string"==typeof n?n.trim():n}function o(t){return r.defaultCleaner.clean(t)}function i(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!t)return[];if(Array.isArray(t))return l.Arrays.flatten(t.map(function(t){return i.apply(void 0,u([t],e))}));if("object"==typeof t){var o=s(e),a=o[0],c=o.slice(1),f=n(t,a);return"object"==typeof f?i.apply(void 0,u([f],c)):Boolean(f)?[f]:[]}return[]}function a(t,e,r,n){return void 0===n&&(n="Untrusted"),{source:t+"["+e+"]",identifier:o(r),type:n}}var s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}
};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var l=e.r(8),f=e.r(11),d=function(){function t(t){this.rules=t}return t.prototype.clean=function(t){var e=this;return null==t?t:"string"==typeof t?this.rules.reduce(function(t,e){return"function"==typeof e?e(t):t.replace(e.search,e.replace)},t):Array.isArray(t)?t.map(o):"object"==typeof t?Object.keys(t).reduce(function(r,n){var o=t[n];return r[n]=e.clean(o),r},{}):t},t}();r.Cleaner=d;var p=function(t){return t.trim()},h={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`","&nbsp;":" "};r.decode=function(t){var e="(?:"+Object.keys(t).join("|")+")",r=RegExp(e),n=RegExp(e,"g");return function(e){return r.test(e)?e.replace(n,function(e){return t[e]}):e}}(h),r.CleanTemplateString={search:/{{.*}}/g,replace:""},r.CleanPunctuationRule={search:/[,.\/#!$%^*;:{}\[\]()=_`~®©™'\u201C\u201D\u2018\u2019]+/g,replace:""},r.CleanSpaceRule={search:/\s+/g,replace:" "},r.CleanAndRule={search:/\sand\s/gi,replace:" & "},r.CleanImageLogoRule={search:/\s*(?:Image|Logo)\s*/gi,replace:""},r.CleanAdultsOnlyRule={search:/\s*(?:Uniquement\s+Adultes|Adults?\s*(?:Only)\s*)/gi,replace:""},r.CleanOfficialSiteRule={search:/\s*[(\[]?Official\s*(?:Hotel)?\s*(?:((?:Web)?Site)|Homepage|booking\s*engine)\s*(?:for|of)?[)\]]?\s*/gi,replace:""},r.CleanEndsWithAmpersandRule={search:/\s&$/,replace:""},r.defaultCleaner=new d([r.CleanTemplateString,r.decode,r.CleanPunctuationRule,r.CleanSpaceRule,r.CleanImageLogoRule,r.CleanAdultsOnlyRule,r.CleanOfficialSiteRule,r.CleanAndRule,r.CleanEndsWithAmpersandRule,l.titleCase,p]),r.spaceCleaner=new d([r.decode,r.CleanSpaceRule,p]),r.clean=o,r.getAll=i,r.OtherSource={source:"Other",identifier:"Other",type:"Untrusted"},r.identifierSource=a;var y=function(){function t(t,e){this.orderedStructuredDataTypes=t,this.type=e}return t.prototype.from=function(t){var e=this;return l.Arrays.flatten(this.filterStructuredData(t).map(function(t){return(Array.isArray(t.name)?t.name:[t.name]).map(function(r){return{source:"structuredData[@type='"+t["@type"]+"'].name",identifier:o(e.addBrand(t.brand,r)),type:e.type}})}))},t.prototype.addBrand=function(t,e){return t?e.indexOf(t)>=0?e:t+" "+e:e},t.prototype.filterStructuredData=function(t){var e=this;return t?t.filter(function(t){return e.orderedStructuredDataTypes.indexOf(t["@type"])>=0}).filter(function(t){return Boolean(t.name)}).sort(function(t,r){return e.orderedStructuredDataTypes.indexOf(t["@type"])-e.orderedStructuredDataTypes.indexOf(r["@type"])}):[]},t}();r.StructuredDataSources=y,r.trustedStructuredDataTypes=["Hotel","LodgingBusiness","BedAndBreakfast"],r.untrustedStructuredDataTypes=["WebSite","LocalBusiness","Organization"],r.otherStructuredDataTypes=["HotelRoom","LodgingReservation","Offer"],r.supportedStructuredDataTypes=u(r.trustedStructuredDataTypes,r.untrustedStructuredDataTypes,r.otherStructuredDataTypes);var g=function(){function t(){this.identifierType="Trusted",this.sources=["dataLayer.context.hotelName","dataLayer.Cart.HName","dataLayer.propertyName","dataLayer.ihReservations.ihHotelName","dataLayer.ihHotelName","dataLayer.HName","dataLayer.transactionHotelName","dataLayer.ratequeryHotelName","dataLayer.hpr","dataLayer.strippedPropertyName","dataLayer.property_name","globalTokens.HName","dataLayer.flipto.sessionData.propertyName","dataLayer.HotelName","wsVars.HotelName","wlp.hotelInfo.name","Imperatore","rmsClientId","location.context.chainSelectorValue","busyRooms"],this.structuredDataSources=new y(r.trustedStructuredDataTypes,this.identifierType)}return t.prototype.fromProbe=function(t){var e=this.fromTrustedSources(t),r=this.fromStructuredData(t.structuredData);return u(e,r).filter(function(t){switch(typeof t.identifier){case"string":case"number":return t.identifier;case"object":Array.isArray(t.identifier)?f.defaultLogger.log("Array found from",t.source):f.defaultLogger.log("Object found from",t.source)}})},t.prototype.fromStructuredData=function(t){return this.structuredDataSources.from(t)},t.prototype.fromTrustedSources=function(t){var e=this;return l.Arrays.flatten(this.sources.map(function(r){return l.Arrays.clean(l.Arrays.unique(i.apply(void 0,u([t],r.split("."))))).map(function(t,n){return a(r,n,t,e.identifierType)})}))},t}();r.TrustedIdentifierSources=g;var v=function(){function t(t){this.labels=t,this.identifierType="Untrusted",this.sources=["dataLayer.SynxisHotelName","location.context.channelId","location.context.hotel","location.context.hotelid","hotelCodeFromCookie","loews","explicitHotelIdentifier"],this.structuredDataSources=new y(r.untrustedStructuredDataTypes,this.identifierType)}return t.prototype.fromProbe=function(t){var e=this.fromStructuredData(t.structuredData),r=this.fromUntrustedSources(t);return u(e,this.labels,r).filter(function(t){return"string"==typeof t.identifier||"number"==typeof t.identifier})},t.prototype.fromStructuredData=function(t){return this.structuredDataSources.from(t)},t.prototype.fromUntrustedSources=function(t){var e=this;return l.Arrays.flatten(this.sources.map(function(r){return l.Arrays.clean(l.Arrays.unique(i.apply(void 0,u([t],r.split("."))))).map(function(t,n){return a(r,n,t,e.identifierType)})}))},t}();r.UntrustedIdentifierSources=v;var m=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.finders=t}return t.prototype.fromProbe=function(t){var e,r,n=[];try{for(var o=c(this.finders),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.fromProbe(t);n=n.concat(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t}();r.CompositeIdentifierSources=m},e.f[11]=function(t,r){function n(){try{return"object"==typeof location&&a.queryObject(location.search)["triptease-debug"]||!1||"object"==typeof localStorage&&!!localStorage.getItem("triptease-debug")}catch(t){return!1}}var o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(r,"__esModule",{value:!0});var a=e.r(12),s=function(){function t(t,e,r){void 0===t&&(t=console.log),void 0===e&&(e=console.error),void 0===r&&(r=console.debug||console.log),this.log=t,this.error=e,this.debug=r}return t}();r.ConsoleLogger=s;var u=function(){function t(){this.log=function(){},this.error=function(){},this.debug=function(){}}return t}();r.NoOpLogger=u,r.isDebug=n;var c=function(){function t(){this.console=new s}return t.prototype.debug=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n()&&(e=this.console).debug.apply(e,i([t],r))},t.prototype.log=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n()&&(e=this.console).log.apply(e,i([t],r))},t.prototype.error=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(e=this.console).error.apply(e,i([t],r))},t}();r.DefaultLogger=c,r.defaultLogger=new c},e.f[12]=function(t,r){function n(t,e){return void 0===e&&(e=!0),t?(0==t.indexOf("?")&&(t=t.substring(1,t.length)),t.split("&").map(function(t){return t.split("=")}).reduce(function(t,r){var n=r[0],a=r[1];if(!n)return t;var s=a?decodeURIComponent(a.replace(/\+/g,"%20")):a,u=e?o(s):s;return i.accumulateMultipleValues(t,n,u)},{})):{}}function o(t){try{return JSON.parse(t)}catch(e){return t}}Object.defineProperty(r,"__esModule",{value:!0});var i=e.r(8),a=function(){function t(){}return t.extract=function(t,e){void 0===e&&(e=document);var r=new RegExp(".*"+t+".js\\?(.*)"),o=e.querySelector('script[src*="'+t+'.js"]');return o?function(t){var e=t.match(r);return e?n(e[1]):{}}(o.src):{}},t}();r.QueryParams=a,r.queryObject=n,r.coerce=o},e.f[13]=function(r,n){function o(e){var r=this;return new t(function(t){r.setTimeout(function(){t()},e)})}Object.defineProperty(n,"__esModule",{value:!0});var i=e.r(14),a=function(){function t(){this.delay=o.bind(this)}return t.prototype.clearInterval=function(t){clearInterval(t)},t.prototype.clearTimeout=function(t){clearTimeout(t)},t.prototype.setInterval=function(t,e){return setInterval(t,e)},t.prototype.setTimeout=function(t,e){return setTimeout(t,e)},t}();n.SystemTimers=a;var s=function(){function t(t){void 0===t&&(t=new i.SystemClock),this.clock=t,this.timers=[],this.lastHandle=0,this.delay=o.bind(this)}return t.prototype.clearInterval=function(t){this.timers=this.timers.filter(function(e){return e.handle!=t})},t.prototype.clearTimeout=function(t){this.clearInterval(t)},t.prototype.setInterval=function(t,e){return this.createTimer(e,t,"interval")},t.prototype.setTimeout=function(t,e){return this.createTimer(e,t,"timeout")},t.prototype.runNext=function(){this.timers=this.timers.sort(function(t,e){return e.scheduled.getTime()-t.scheduled.getTime()});var t=this.timers.pop();if(t)return t.handler(),"interval"===t.type&&this.createTimer(t.timeout,t.handler,t.type,t.handle),t},t.prototype.runAll=function(){for(var t,e=[];t=this.runNext();)e.push(t);return e},t.prototype.createTimer=function(t,e,r,n){void 0===n&&(n=this.nextHandle());var o=new Date(this.clock.now().getTime()+t);return this.timers.push({handler:e,timeout:t,type:r,handle:n,scheduled:o}),n},t.prototype.nextHandle=function(){return++this.lastHandle},t}();n.ManualTimers=s,n.defaultTimers=new a},e.f[14]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.now=function(){return new Date},t}();e.SystemClock=r;var n=function(){function t(t){this.value=t}return t.prototype.now=function(){return this.value},t.prototype.moveForwardOneHour=function(){return this.value.setTime(this.value.getTime()+36e5),this.value},t}();e.StoppedClock=n},e.f[15]=function(t,e){function r(t,e,r){return Object.defineProperty(t,e,{value:r})}function n(t,e,n){return r(t,e,n)[e]}Object.defineProperty(e,"__esModule",{value:!0}),e.replace=r,e.lazy=n},e.f[16]=function(t,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=e.r(13),i=e.r(11),a=function(){function t(e,r,a,s){var u=this;void 0===r&&(r=t.defaultTimerMs),void 0===a&&(a=i.defaultLogger),void 0===s&&(s=o.defaultTimers),this.window=e,this.timerMs=r,this.logger=a,this.timers=s,this.handlers=[],this.handle=function(){var t,e;try{for(var r=n(u.handlers),o=r.next();!o.done;o=r.next()){var i=o.value;try{i()}catch(t){u.logger.log(t)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}}return t.prototype.listen=function(t){this.handlers.push(t)},t.prototype.start=function(){this.timerId=this.timers.setInterval(this.handle,this.timerMs),this.window.document.addEventListener("DOMContentLoaded",this.handle),this.window.addEventListener("popstate",this.handle),this.window.addEventListener("hashchange",this.handle),this.window.addEventListener("pageshow",this.handle),this.window.addEventListener("pagehide",this.handle),"loading"!=this.window.document.readyState&&this.handle()},t.prototype.stop=function(){this.timers.clearTimeout(this.timerId),this.window.document.removeEventListener("DOMContentLoaded",this.handle),this.window.removeEventListener("popstate",this.handle),this.window.removeEventListener("hashchange",this.handle),this.window.removeEventListener("pageshow",this.handle),this.window.removeEventListener("pagehide",this.handle)},t.defaultTimerMs=1e3,t}();r.WindowEvents=a;var s=function(){function t(){}return t.prototype.listen=function(){},t.prototype.start=function(){},t.prototype.stop=function(){},t}();r.StubEvents=s},e.f[17]=function(t,e){var r=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){var n=t.RFC_3986.exec(e);if(!n)throw new Error("Invalid Uri: "+e);var i=r(n,10),a=i[2],s=i[4],u=i[5],c=i[7],l=i[9];this.scheme=a,this.authority=s?new o(s):void 0,this.path=u,this.query=c,this.fragment=l}return t.prototype.toString=function(){var t=[];return void 0!==this.scheme&&t.push(this.scheme,":"),void 0!==this.authority&&t.push("//",this.authority.toString()),t.push(this.path),void 0!==this.query&&t.push("?",this.query),void 0!==this.fragment&&t.push("#",this.fragment),t.join("")},Object.defineProperty(t.prototype,"host",{get:function(){return this.authority&&this.authority.host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this.authority&&this.authority.port},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userInfo",{get:function(){return this.authority&&this.authority.userInfo},enumerable:!0,configurable:!0}),t.RFC_3986=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t}();e.Uri=n;var o=function(){function t(e){var n=t.RFC_3986.exec(e);if(!n)throw new Error("Invalid Authority: "+e);var o=r(n,4),i=o[1],a=o[2],s=o[3];this.userInfo=i,this.host=a,this.port=s}return t.prototype.toString=function(){var t=[];return void 0!==this.userInfo&&t.push(this.userInfo,"@"),void 0!==this.host&&t.push(this.host),void 0!==this.port&&t.push(":",this.port),t.join("")},t.RFC_3986=/(?:([^@]+)@)?([^:]+)(?::([\d]+))?/,t}();e.Authority=o},e.f[18]=function(r,n){function o(t){return"object"==typeof t&&"type"in t&&"string"==typeof t.type}function i(t){var e={};return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=JSON.stringify(r),i=e[o];return void 0!==i?i:e[o]=t.apply(void 0,f(r))}}function a(t){return t.document.querySelector('iframe[name="triptease.onboard.kernel"]')}function s(t){var e=a(t);if(e)return new g(t,e.contentWindow)}function u(t){return"object"==typeof t&&"name"in t&&"string"==typeof t.name&&"message"in t&&"string"==typeof t.message&&"stack"in t&&"string"==typeof t.stack}var c=this&&this.__assign||function(){return c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},c.apply(this,arguments)},l=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},f=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0});var d=e.r(11),p=e.r(19),h=e.r(17);n.isOnboardMessage=o;var y=function(){function t(t,e){void 0===e&&(e=d.defaultLogger),this.worker=t,this.logger=e}return t.prototype.receive=function(t){var e=this;this.worker.addEventListener("message",function(r){if(!o(r.data))return void e.logger.debug("Non onboard message received ignoring",r.data);t(r.data,e)})},t.prototype.send=function(t){this.worker.postMessage(t)},t}();n.WorkerHandler=y;var g=function(){function t(t,e,r,o){void 0===r&&(r=n.DEFAULT_HOSTS),void 0===o&&(o=d.defaultLogger),this.listener=t,this.target=e,this.allowedOrigins=r,this.logger=o}return t.prototype.receive=function(e){var r=this;this.listener.addEventListener("message",function(n){return n.origin&&r.allowedOrigins.length>0&&-1===r.allowedOrigins.indexOf(new h.Uri(n.origin).host)?void r.logger.log("origin doesn't match: "+n.origin+" domains: "+r.allowedOrigins,n):o(n.data)?void e(n.data,new t(void 0,n.source||r.target)):void r.logger.debug("Non onboard message received ignoring",n.data)})},t.prototype.send=function(t){this.target.postMessage(t,"*")},t}();n.WindowHandler=g,n.DEFAULT_HOSTS=["onboard.triptease.io","localhost"];var v=function(){function e(t,e,r,n,o){void 0===r&&(r=d.defaultLogger),void 0===n&&(n=new p.UuidGenerator),void 0===o&&(o="triptease.onboard."),this.global=t,this.handler=e,this.logger=r,this.idGenerator=n,this.prefix=o,this.promiseHandlers={},this.createFunction=i(function(t){var e="var window = this; var fun = "+t+"; return fun();";return new Function(e)})}return e.prototype.start=function(t){var e=this;this.handler.receive(function(r,n){return e.handle(r,n,t)})},e.prototype.handle=function(t,e,r){var n=t.type.split(this.prefix)[1];switch(this.logger.debug("message type:",n,t),n){case"response":return this.response(t.correlationId,t.value);case"eval":return this.handleResult(t.correlationId,this.eval(t.value),e);default:if(!r)return;var o=r[n];if(!o)return void this.logger.log("No slot called "+n+" was found");var i=this.callSlot(o,r,t.value);this.handleResult(t.correlationId,i,e)}},e.prototype.callSlot=function(t,e,r){try{return t.call(e,r)}catch(t){return{name:t.name,message:t.message,stack:t.stack||""}}},e.prototype.handleResult=function(e,r,n){var o=this;e&&(r instanceof t?r.then(function(t){return o.handleResult(e,t,n)}):this.send({type:"response",correlationId:e,value:r},n))},e.prototype.send=function(t,e){void 0===e&&(e=this.handler),e.send(c(c({},t),{type:this.prefix+t.type}))},e.prototype.request=function(e){var r=this,n=this.idGenerator.generate();return this.send(c(c({},e),{correlationId:n})),new t(function(t,e){r.promiseHandlers[n]={resolve:t,reject:e}})},e.prototype.response=function(t,e){if(t){var r=this.promiseHandlers[t];if(void 0===r)return void this.logger.debug("Unknown correlationId received",t);u(e)?r.reject(e):r.resolve(e),delete this.promiseHandlers[t]}},e.prototype.requestEval=function(t){return this.request({type:"eval",value:t.toString()})},e.prototype.eval=function(t){try{return this.createFunction(t).call(this.global)}catch(t){this.logger.log("Messaging.eval:",t)}},e}();n.Messaging=v,n.caching=i,n.kernelFrame=a,n.handlerFor=s,n.isError=u;var m=function(){function e(){this.messages=[]}return e.prototype.start=function(){},e.prototype.request=function(e){return this.messages.push(e),t.resolve({})},e}();n.InMemoryMessaging=m},e.f[19]=function(t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e.r(20),o=function(){function t(){}return t.prototype.generate=function(t){if(void 0!==t)throw new Error("UuidGenerator does not support custom lengths");return n.uuid().replace(/-/g,"")},t}();r.UuidGenerator=o;var i=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ids=t}return t.prototype.generate=function(t){var e=this.ids.shift();if(!e)throw new Error("FixedIdGenerator has run out of ids");if(void 0!==t&&e.length!=t)throw new Error("Expected "+e+".length to equal "+t+" but was "+e.length);return e},t}();r.FixedIdGenerator=i},e.f[20]=function(t,e){function r(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}Object.defineProperty(e,"__esModule",{value:!0}),e.uuid=r},e.f[21]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.window=t}return t.prototype.listen=function(t){this.window.addEventListener("error",function(e){t(e.error)})},t}();e.ErrorListener=r},e.f[22]=function(t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},n.apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(r,"__esModule",{value:!0});var i=e.r(23),a=function(){function t(t,e,r){void 0===r&&(r=i.fireAndForget),this.config=t,this.window=e,this.fire=r}return t.prototype.error=function(t){this.send("error",t)},t.prototype.warn=function(t){this.send("warning",t)},t.prototype.send=function(t,e){var r=this.exception(e);0!==r.trace.frames.filter(function(t){return-1!==t.filename.indexOf("triptease.io")}).length&&this.fire({url:"https://api.rollbar.com/api/1/item/",body:{access_token:this.config.accessToken,data:n(n({},this.config.payload),{client:n(n({},this.config.payload.client),{javascript:n(n({},this.config.payload.client.javascript),{browser:this.window.navigator.userAgent})}),level:t,body:r,request:{url:this.window.location.href},platform:"browser"})}})},t.prototype.exception=function(t){return{trace:{frames:this.frames(t),exception:{class:t.name,message:t.message}}}},t.prototype.frames=function(t){if(!t.stack)return[];for(var e=/at (?:([^(]+)? \(?)?(.+):(\d+):(\d+)\)?/g,r=[];;){var n=e.exec(t.stack);if(!n)return r;var i=o(n,5),a=i[1],s=i[2],u=i[3],c=i[4];r.unshift({filename:s,lineno:parseInt(u),colno:parseInt(c),method:a})}},t}();r.default=a},e.f[23]=function(t,e){function r(t){var e=t.method,r=void 0===e?"POST":e,n=t.url,o=t.body,i=JSON.stringify(o);if(void 0!==navigator.sendBeacon&&"POST"===r)navigator.sendBeacon(n,i);else if("undefined"!=typeof fetch)fetch(n,{method:r,body:i});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(r,n,!0),a.send(i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.fireAndForget=r},e.f[24]=function(r,n){function o(t){return{title:t.document.title,locale:t.document.documentElement.lang,url:t.location.href,referrer:t.document.referrer}}var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},i.apply(this,arguments)},a=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},s=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(n,"__esModule",{value:!0});var u=e.r(14),c=e.r(20),l=function(){function t(t,e,r,n){void 0===n&&(n=new u.SystemClock),this.browserWindow=t,this.sourceApp=e,this.pageVisitId=r,this.clock=n;try{this.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){this.timezone=""}}return t.prototype.buildMessage=function(t,e){return a(this,void 0,void 0,function(){var r;return s(this,function(n){return r=this.clock.now(),[2,i(i({},t),{createdAt:r,sentAt:r,messageId:c.uuid(),userId:e&&e.userId,sessionId:e&&e.sessionId,pageVisitId:this.pageVisitId,context:{library:this.sourceApp,userAgent:this.browserWindow.navigator.userAgent,locale:this.browserWindow.navigator.language,page:o(this.browserWindow),screen:{width:this.browserWindow.screen.width,height:this.browserWindow.screen.height},timezone:this.timezone}})]})})},t}();n.MessageBuilder=l},e.f[25]=function(r,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o.apply(this,arguments)},i=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},a=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0});var c=e.r(20),l=e.r(23),f=e.r(14),d=e.r(24);n.BootstrapAppDefinition={name:"triptease.onboard.bootstrap",version:"1976.14290"},n.KernelAppDefinition={name:"triptease.onboard.kernel",version:"1976.14290"};var p=function(){function t(t){void 0===t&&(t=[]),this.queued=t}return t.prototype.send=function(t){this.queued.push(t)},t}();n.InMemoryMessageBatcher=p;var h=function(){function t(t,e,r,o){var s=this;void 0===t&&(t=window),void 0===r&&(r=new f.SystemClock),void 0===o&&(o=new d.MessageBuilder(t,n.BootstrapAppDefinition,e)),this.browserWindow=t,this.pageVisitId=e,this.clock=r,this.messageBuilder=o,this.queued=[],setInterval(function(){return i(s,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.flush()];case 1:return[2,t.sent()]}})})},1e3),this.browserWindow.addEventListener("unload",function(){return i(s,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.flush()];case 1:return[2,t.sent()]}})})})}return t.prototype.send=function(t){this.queued.push(o(o({},t),{messageId:c.uuid(),createdAt:this.clock.now()}))},t.prototype.flush=function(){return i(this,void 0,void 0,function(){var t,e;return a(this,function(r){switch(r.label){case 0:return 0===this.queued.length?[2]:(t=u(this.queued),this.queued=[],[4,this.messageBuilder.buildMessage({type:"triptease.onboard.batch",payload:t})]);case 1:return e=r.sent(),l.fireAndForget({url:"https://onboard.triptease.io/message/batch",body:e}),[2]}})})},t}();n.RealMessageBatcher=h},e.f[26]=function(r,n){function o(t){return"triptease.onboard."+t.name.toLowerCase()}var i=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},a=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e.r(11),u=e.r(27),c=function(){function t(t){void 0===t&&(t=s.defaultLogger),this.logger=t,this.workers={}}return t.prototype.createWorker=function(t,e){return i(this,void 0,void 0,function(){var r,n,o;return a(this,function(i){switch(i.label){case 0:return(r=this.workers[t])?[2,r]:(n=this.workers,o=t,[4,this.create(e,{name:t})]);case 1:return[2,n[o]=i.sent()]}})})},t.prototype.create=function(t,e){return i(this,void 0,void 0,function(){var r,n,o,i;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,1,,3]),[2,new Worker(t,e)];case 1:return r=a.sent(),this.logger.debug("Failed to create Worker switching to Blob Worker because:",r.message),[4,u.http({method:"GET",url:t})];case 2:return n=a.sent(),o=n.body,i=new Blob([o],{type:"application/javascript"}),[2,new Worker(URL.createObjectURL(i),e)];case 3:return[2]}})})},t}();n.WorkerFactory=c;var l=function(){function t(t,e,r,n){void 0===e&&(e=s.defaultLogger),void 0===r&&(r=new c(e)),void 0===n&&(n=new f(t,e)),this.window=t,this.logging=e,this.workerFactory=r,this.waiter=n}return t.prototype.start=function(e){return i(this,void 0,void 0,function(){var r,n,i,s,u,c;return a(this,function(a){switch(a.label){case 0:return this.logging.debug("ApplicationStarter starting app",e.name,e.type,e.url),r=this.window.document,n=o(e),"worker"!==e.type?[3,4]:[4,this.workerFactory.createWorker(n,e.url)];case 1:return i=a.sent(),e.startMessage?[4,this.waiter.waitForMessage(e.startMessage)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2,i];case 4:return(s=r.querySelector(e.type+'[name="'+n+'"]'))?(this.logging.debug("ApplicationStarter app previously started returning that"),[2,s]):(u=r.createElement(e.type),u.setAttribute("name",n),u.src=e.url,c=t.DefaultOptions[e.type],Object.keys(c).forEach(function(t){u.setAttribute(t.toLowerCase(),c[t])}),this.addElement(u),e.startMessage?[4,this.waiter.waitForMessage(e.startMessage)]:[3,6]);case 5:return a.sent(),[3,8];case 6:return"script"!==e.type?[3,8]:[4,this.waiter.waitForLoadEvent(u)];case 7:a.sent(),a.label=8;case 8:return[2,u]}})})},t.prototype.addElement=function(t){(this.window.document.body||this.window.document.documentElement).appendChild(t)},t.DefaultOptions={script:{defer:"",async:"",crossOrigin:"anonymous"},iframe:{style:"display: none;",sandbox:"allow-scripts allow-same-origin"}},t}();n.ApplicationStarter=l,n.name=o;var f=function(){
function e(t,e){void 0===e&&(e=s.defaultLogger),this.window=t,this.logging=e}return e.prototype.waitForLoadEvent=function(e){return new t(function(t,r){e.addEventListener("load",t),e.addEventListener("error",r)})},e.prototype.waitForMessage=function(e,r){var n=this;return void 0===r&&(r=this.window),this.logging.debug("ApplicationStarter waiting for started message",e),new t(function(t){var o=function(i){try{var a=i.data&&i.data.type;n.logging.debug("ApplicationStarter message received "+a+" expecting "+e),a===e&&(r.removeEventListener("message",o),t(i.data))}catch(t){n.logging.debug("ApplicationStarter error in parsing message",t,i)}};r.addEventListener("message",o)})},e}();n.ApplicationWaiter=f},e.f[27]=function(e,r){function n(e){return o(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.url,{method:e.method,headers:e.headers,body:e.body,credentials:e.options&&e.options.credentials?"include":"omit"})];case 1:return r=i.sent(),n={status:r.status},[4,r.text()];case 2:return[2,(n.body=i.sent(),n)];case 3:return o=new XMLHttpRequest,o.open(e.method,e.url,!0),e.headers&&Object.keys(e.headers).forEach(function(t){o.setRequestHeader(t,e.headers[t])}),e.options&&e.options.credentials&&(o.withCredentials=!0),o.send(e.body),[2,new t(function(t,e){o.addEventListener("load",function(e){t({status:o.status,body:o.responseText})}),o.addEventListener("error",function(t){e(t)})})]}})})}var o=this&&this.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=t))(function(t,n){function a(t){try{u(o.next(t))}catch(t){n(t)}}function s(t){try{u(o.throw(t))}catch(t){n(t)}}function u(e){e.done?t(e.value):i(e.value).then(a,s)}u((o=o.apply(e,r||[])).next())})},i=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0}),r.http=n},e.f[28]=function(t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e.r(14),o=function(){function t(t,e){void 0===e&&(e=new n.SystemClock),this.browserWindow=t,this.clock=e}return t.prototype.get=function(t){var e=this.browserWindow.document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));if(e)return decodeURIComponent(e[2])},t.prototype.set=function(t,e,r,n,o){var i=[encodeURIComponent(t)+"="+encodeURIComponent(e),r?"; max-age="+r+"; expires="+new Date(this.clock.now().getTime()+1e3*r).toUTCString():"",n?"; path="+n:"",o?"; domain="+o:""].join("");this.browserWindow.document.cookie=i},t}();r.Cookie=o};window;e.r(0)}()}();